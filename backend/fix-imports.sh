#!/bin/bash

# Скрипт для исправления ES модульных импортов в TypeScript
# Добавляет .js расширение к локальным импортам

echo "Исправляем импорты для ES modules..."

# Найти все .ts файлы в src/ и исправить импорты
find src/ -name "*.ts" -type f -exec sed -i '' \
  -e "s|from '\.\./\([^']*\)';|from '../\1.js';|g" \
  -e "s|from '\./\([^']*\)';|from './\1.js';|g" \
  {} \;

echo "✅ Импорты исправлены!"

# Показать сколько файлов было изменено
echo "Изменённые файлы:"
find src/ -name "*.ts" -type f -exec grep -l "\.js';" {} \; | wc -l