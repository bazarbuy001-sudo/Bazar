# –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ç–æ–≤–∞—Ä–æ–≤ - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –û–±–∑–æ—Ä

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- ‚úÖ **5 —Å–ª–æ—Ç–æ–≤ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** (1 –æ—Å–Ω–æ–≤–Ω–æ–µ + 4 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö)
- ‚úÖ **Drag & Drop –ø–æ–¥–¥–µ—Ä–∂–∫–∞** –¥–ª—è –≤—Å–µ—Ö —Å–ª–æ—Ç–æ–≤
- ‚úÖ **Preview –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º** - –º–∏–Ω–∏–∞—Ç—é—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ **–í—ã–±–æ—Ä –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** - –∫–Ω–æ–ø–∫–∞ "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–º"
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –∏ —Ñ–æ—Ä–º–∞—Ç–∞
- ‚úÖ **–ú–∞–∫—Å —Ä–∞–∑–º–µ—Ä 5MB** –∑–∞ —Ñ–∞–π–ª
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤**: JPG, PNG, WebP
- ‚úÖ **Backend API** - endpoint –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–æ–≤–∞—Ä–∞–º–∏** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–≤—è–∑–µ–π –≤ –ë–î

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### Frontend

#### HTML (`/admin/index.html`)
```html
<!-- Image Upload Section –≤ Product Modal -->
<div class="form-group">
  <label>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞</label>
  <div id="image-upload-container" class="image-upload-container">
    <!-- 5 —Å–ª–æ—Ç–æ–≤ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
    <div class="image-slot main-image-slot" data-slot="0">...</div>
    <div class="image-slot additional-image-slot" data-slot="1">...</div>
    <!-- ... 3 more slots -->
  </div>
</div>
```

#### CSS (`/admin/css/admin-styles.css`)
```css
/* Image Upload Styles */
.image-upload-container { ... }
.image-slot { ... }
.image-drop-zone { ... }
.image-preview { ... }
/* etc. */
```

#### JavaScript (`/admin/js/image-upload.js`)
–ù–æ–≤—ã–π –º–æ–¥—É–ª—å `ImageUploadManager`:
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 5 —Å–ª–æ—Ç–∞–º–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- Drag & Drop –æ–±—Ä–∞–±–æ—Ç–∫–∞
- File input –æ–±—Ä–∞–±–æ—Ç–∫–∞
- Preview —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
- –í—ã–±–æ—Ä –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

#### JavaScript (`/admin/js/products-management.js`)
–û–±–Ω–æ–≤–ª–µ–Ω–æ:
- –ú–µ—Ç–æ–¥ `openProductModal()` - —Å–±—Ä–æ—Å –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ú–µ—Ç–æ–¥ `editProduct()` - –∑–∞–≥—Ä—É–∑–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ú–µ—Ç–æ–¥ `saveProduct()` - –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ backend

#### JavaScript (`/admin/js/api-client.js`)
–î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥:
```javascript
async uploadProductImages(imageFiles)
// –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–∞–π–ª—ã –Ω–∞ /api/v1/admin/products/upload
```

### Backend

#### Server (`/backend/src/server.ts`)
–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ multer:
```typescript
import multer from 'multer';

const upload = multer({
  storage: multer.memoryStorage(),
  limits: { fileSize: 5 * 1024 * 1024 }, // 5MB
  fileFilter: (req, file, cb) => { ... }
});

app.use('/api/v1/admin/products/upload', upload.array('images', 5));
```

#### Routes (`/backend/src/routes/admin.routes.ts`)
–î–æ–±–∞–≤–ª–µ–Ω –º–∞—Ä—à—Ä—É—Ç:
```typescript
router.post('/products/upload', adminController.uploadProductImages);
```

#### Controller (`/backend/src/api/admin.controller.ts`)
–î–æ–±–∞–≤–ª–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:
```typescript
export const uploadProductImages = (req: Request, res: Response): void => {
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
  // –í–∞–ª–∏–¥–∞—Ü–∏—è
  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏ (–º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ –¥–∏—Å–∫)
  // –í–æ–∑–≤—Ä–∞—Ç URLs –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
}
```

#### Package (`/backend/package.json`)
–î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```json
"multer": "^1.4.5"
"@types/multer": "^1.4.7"
```

---

## API Endpoints

### POST `/api/v1/admin/products/upload`

**–¢—Ä–µ–±—É–µ—Ç—Å—è**: Authentication token –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization: Bearer <token>`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (FormData)**:
- `images` - –º–∞—Å—Å–∏–≤ —Ñ–∞–π–ª–æ–≤ (–º–∞–∫—Å 5, –∫–∞–∂–¥—ã–π –º–∞–∫—Å 5MB)
- `image_0_isMain` - boolean (true –µ—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–µ)
- `image_1_isMain` - boolean
- ... –∏ —Ç.–¥.
- `productId` - ID —Ç–æ–≤–∞—Ä–∞

**–û—Ç–≤–µ—Ç**:
```json
{
  "success": true,
  "message": "Images uploaded successfully",
  "data": {
    "productId": "fabric-001",
    "images": [
      {
        "id": "img-123456-0",
        "url": "/uploads/fabric-001-123456-abc.jpg",
        "name": "image.jpg",
        "isMain": true
      },
      {
        "id": "img-123456-1",
        "url": "/uploads/fabric-001-123456-def.png",
        "name": "detail.png",
        "isMain": false
      }
    ]
  }
}
```

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (Frontend)

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

1. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "+ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä"
2. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É (–Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ü–µ–Ω–∞, —Ü–≤–µ—Ç–∞)
3. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø–µ—Ä–≤—ã–π —Å–ª–æ—Ç (–æ—Å–Ω–æ–≤–Ω–æ–µ) - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
   - –ú–æ–∂–Ω–æ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç—å (drag & drop)
   - –ò–ª–∏ –∫–ª–∏–∫–Ω—É—Ç—å –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞
4. –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –≤ —Å–ª–æ—Ç—ã 2-5
5. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:
   - –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ —Å–ª–æ—Ç —Å –æ—Å–Ω–æ–≤–Ω—ã–º
   - –ù–∞–∂–∞—Ç—å "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–º"
6. –ù–∞–∂–∞—Ç—å "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
   - –¢–æ–≤–∞—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
   - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–∞ backend
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ

### 2. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

1. –ù–∞–∂–∞—Ç—å "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" –Ω–∞ —Ç–æ–≤–∞—Ä–µ –≤ —Ç–∞–±–ª–∏—Ü–µ
2. –ú–æ–¥–∞–ª—å –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
3. –ú–æ–∂–Ω–æ:
   - –£–¥–∞–ª–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–∫–Ω–æ–ø–∫–∞ ‚úï)
   - –ó–∞–º–µ–Ω–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–∫–ª–∏–∫–Ω—É—Ç—å –Ω–∞ —Å–ª–æ—Ç, –≤—ã–±—Ä–∞—Ç—å –Ω–æ–≤–æ–µ)
   - –ò–∑–º–µ–Ω–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–∫–Ω–æ–ø–∫–∞ "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–º")
4. –ù–∞–∂–∞—Ç—å "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"

### 3. –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è:
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–º–∞–∫—Å 5MB)
- –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ (JPG, PNG, WebP)
- –û—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ –∫—Ä–∞—Å–Ω–æ–º –±–ª–æ–∫–µ –ø–æ–¥ –∑–∞–≥—Ä—É–∑—á–∏–∫–æ–º

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (Backend)

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd backend
npm install
# –∏–ª–∏
yarn install
```

### 2. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
npm run dev
# –∏–ª–∏ –¥–ª—è production
npm run build && npm start
```

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

–í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
- –§–∞–π–ª—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ (req.files –∏–º–µ–µ—Ç buffer)
- –ú–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ –¥–∏—Å–∫ –≤ `/backend/uploads/`
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (AWS S3, Cloudinary –∏ —Ç.–¥.)

**–ü—Ä–∏–º–µ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞ –¥–∏—Å–∫** (–≤ admin.controller.ts):

```typescript
import fs from 'fs';
import path from 'path';

// –í uploadProductImages —Ñ—É–Ω–∫—Ü–∏–∏:
const uploadsDir = path.join(process.cwd(), 'uploads');
if (!fs.existsSync(uploadsDir)) {
  fs.mkdirSync(uploadsDir, { recursive: true });
}

files.forEach((file, index) => {
  const filepath = path.join(uploadsDir, filename);
  fs.writeFileSync(filepath, file.buffer);
  // ... —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î
});
```

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ë–î (Prisma)

### –¢—Ä–µ–±—É–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—Ö–µ–º–µ

```prisma
// prisma/schema.prisma

model Product {
  id       String     @id @default(cuid())
  name     String
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
  images   ProductImage[]
  // ...
}

model ProductImage {
  id       String   @id @default(cuid())
  productId String
  product  Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  
  url      String   // URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  name     String   // –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞
  isMain   Boolean  @default(false)
  
  uploadedAt DateTime @default(now())
  updatedAt  DateTime @updatedAt
  
  @@index([productId])
}
```

### Migration

```bash
cd backend
npx prisma migrate dev --name add_product_images
```

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–¥–µ

### Frontend - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

```javascript
// –í image-upload.js –∫–ª–∞—Å—Å ImageUploadManager:

// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
const imageFiles = imageUploadManager.getImageFiles();
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: [{index: 0, isMain: true, file: File}, ...]

// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ (–≤–∫–ª—é—á–∞—è base64)
const imagesData = imageUploadManager.getImagesData();
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: {images: [...], mainImageIndex: 0}

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å
if (!imageUploadManager.isValid()) {
  // –û—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ
}

// –°–±—Ä–æ—Å (–æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ)
imageUploadManager.reset();

// –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
imageUploadManager.loadExistingImages([
  {url: '/uploads/img1.jpg', name: 'img1.jpg', isMain: true},
  {url: '/uploads/img2.png', name: 'img2.png', isMain: false}
]);
```

### Backend - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

```typescript
// –í admin.controller.ts:

// –ü–æ–ª—É—á–∏—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
const files = req.files as Express.Multer.File[];

// –ö–∞–∂–¥—ã–π —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç:
// - originalname: string
// - buffer: Buffer
// - mimetype: string
// - size: number

// –ü–æ–ª—É—á–∏—Ç—å –∏–Ω–¥–µ–∫—Å –∏ —Ñ–ª–∞–≥ isMain –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞
files.forEach((file, index) => {
  const isMain = req.body[`image_${index}_isMain`] === 'true';
  // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞
});
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ß–µ—Ä–µ–∑ curl (Backend)

```bash
curl -X POST http://localhost:3000/api/v1/admin/products/upload \
  -H "Authorization: Bearer <token>" \
  -F "images=@/path/to/image1.jpg" \
  -F "images=@/path/to/image2.png" \
  -F "image_0_isMain=true" \
  -F "image_1_isMain=false" \
  -F "productId=fabric-001"
```

### –ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173/admin (–∏–ª–∏ –≥–¥–µ –ª–µ–∂–∏—Ç –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å)
2. –í–æ–π–¥–∏—Ç–µ —Å —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∞–¥–º–∏–Ω–∞
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–¢–æ–≤–∞—Ä—ã" ‚Üí "+ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä"
4. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ drag & drop –∏ file upload

---

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –û—à–∏–±–∫–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

```javascript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ –∫—Ä–∞—Å–Ω–æ–º –±–ª–æ–∫–µ:
// - –§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π (> 5MB)
// - –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞
// - –û—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ
```

### –û—à–∏–±–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```json
// –ï—Å–ª–∏ –Ω–µ—Ç productId
{
  "success": false,
  "error": "Product ID is required"
}

// –ï—Å–ª–∏ —Ç–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω
{
  "success": false,
  "error": "Product not found"
}

// –ï—Å–ª–∏ –Ω–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
{
  "success": false,
  "error": "No files uploaded"
}
```

---

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏—è

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- ‚úÖ In-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤
- ‚úÖ Mock API –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –ë–∞–∑–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ –¥–∏—Å–∫**
   ```typescript
   import fs from 'fs';
   fs.writeFileSync(filepath, file.buffer);
   ```

2. **–û–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** (AWS S3, Cloudinary)
   ```typescript
   const s3 = new AWS.S3();
   await s3.upload({Bucket, Key, Body: file.buffer});
   ```

3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**
   ```typescript
   import sharp from 'sharp';
   const optimized = await sharp(file.buffer)
     .resize(800, 600)
     .webp({quality: 80})
     .toBuffer();
   ```

4. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ permissions (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
   - Rate limiting –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É
   - CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Prisma**
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –≤ –ë–î
   - –°–≤—è–∑–∏ Product ‚Üî ProductImage

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. Backend
```bash
cd backend
npm install  # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å multer
npm run dev  # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
```

### 2. Frontend
–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —É–∂–µ –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã:
- `/admin/js/image-upload.js` - –Ω–æ–≤—ã–π
- `/admin/css/admin-styles.css` - –æ–±–Ω–æ–≤–ª–µ–Ω
- `/admin/js/products-management.js` - –æ–±–Ω–æ–≤–ª–µ–Ω
- `/admin/js/api-client.js` - –æ–±–Ω–æ–≤–ª–µ–Ω
- `/admin/index.html` - –æ–±–Ω–æ–≤–ª–µ–Ω

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
2. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–∞ backend
4. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ç–æ–≤–∞—Ä - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É—Ç—å—Å—è

---

## –§–∞–π–ª—ã, –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ/–¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ

### –î–æ–±–∞–≤–ª–µ–Ω—ã:
- `/admin/js/image-upload.js` (–Ω–æ–≤—ã–π –º–æ–¥—É–ª—å)
- `/backend/src/api/admin.controller.ts` (–º–µ—Ç–æ–¥ `uploadProductImages`)

### –û–±–Ω–æ–≤–ª–µ–Ω—ã:
- `/admin/index.html` - –¥–æ–±–∞–≤–ª–µ–Ω –±–ª–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ modal
- `/admin/css/admin-styles.css` - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç–∏–ª–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- `/admin/js/products-management.js` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å image-upload-manager
- `/admin/js/api-client.js` - –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ uploadProductImages
- `/backend/src/server.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ multer
- `/backend/src/routes/admin.routes.ts` - –¥–æ–±–∞–≤–ª–µ–Ω –º–∞—Ä—à—Ä—É—Ç /products/upload
- `/backend/package.json` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ multer

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏ –±—Ä–∞—É–∑–µ—Ä–∞
–û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Console –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞:
- –ü—Ä–æ—Ü–µ—Å—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
- –û—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- API –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤

### –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω backend –±—É–¥—É—Ç –≤–∏–¥–Ω—ã:
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
- –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ó–∞–ø—Ä–æ—Å—ã –∫ API

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**–ü—Ä–æ–±–ª–µ–º–∞**: –§–∞–π–ª –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–º–∞–∫—Å 5MB)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç (JPG, PNG, WebP)
- –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ—à–∏–±–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞**: –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
npm install  # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ multer —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
npm run dev
```

**–ü—Ä–æ–±–ª–µ–º–∞**: CORS –æ—à–∏–±–∫–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ cors –≤–∫–ª—é—á–µ–Ω –≤ server.ts

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–ú–∞–∫—Å–∏–º—É–º —Ñ–∞–π–ª–æ–≤**: 5 (1 –æ—Å–Ω–æ–≤–Ω–æ–µ + 4 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö)
- **–ú–∞–∫—Å–∏–º—É–º —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞**: 5MB
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã**: JPG, PNG, WebP
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ**: –í –ø–∞–º—è—Ç–∏ (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ –¥–∏—Å–∫ –∏–ª–∏ –æ–±–ª–∞–∫–æ)
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –¢—Ä–µ–±—É–µ—Ç—Å—è JWT token

---

**–ì–æ—Ç–æ–≤–æ –∫ deploy!** üöÄ
